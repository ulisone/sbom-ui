<%# Dependency Tree Visualization %>
<div class="card">
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-lg font-semibold text-text-primary"><%= t("scans.dependency_tree", default: "Dependency Tree") %></h3>
    <div class="flex items-center gap-2">
      <button type="button"
              class="btn btn-secondary btn-sm"
              data-action="click->dependency-tree#updateData"
              data-dependency-tree-data-value="<%= dependency_tree_data.to_json %>">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
        </svg>
        <%= t("common.refresh", default: "Refresh") %>
      </button>
    </div>
  </div>

  <div class="mb-4">
    <div class="flex flex-wrap gap-4 text-sm text-text-secondary">
      <div class="flex items-center gap-2">
        <span class="w-3 h-3 rounded-full bg-blue-500"></span>
        <span>Ecosystem</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="w-3 h-3 rounded-full bg-gray-500"></span>
        <span>Dependency</span>
      </div>
      <div class="flex items-center gap-2">
        <span class="w-3 h-3 rounded-full bg-red-500"></span>
        <span>Vulnerable</span>
      </div>
    </div>
  </div>

  <div class="relative bg-background rounded-lg p-4 overflow-hidden" style="min-height: 500px;"
       data-controller="dependency-tree"
       data-dependency-tree-data-value="<%= dependency_tree_data.to_json %>"
       data-dependency-tree-width-value="800"
       data-dependency-tree-height-value="500">
    <div data-dependency-tree-target="container" class="w-full h-full"></div>
  </div>

  <div class="mt-4 text-sm text-text-muted">
    <p><%= t("scans.tree_hint", default: "Scroll to zoom, drag to pan. Click on nodes for details.") %></p>
  </div>
</div>
